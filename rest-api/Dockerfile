FROM openjdk:17-alpine
ARG JAR_FILE
ARG AWS_ACCESS_KEY_ID_ARG
ARG AWS_SECRET_ACCESS_KEY_ARG
ARG SPRING_PROFILE_ARG
RUN echo ${AWS_ACCESS_KEY_ID_ARG}
RUN echo ${SPRING_PROFILE_ARG}
ENV AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID_ARG}
ENV AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY_ARG}
ENV spring_profiles_active=${SPRING_PROFILE_ARG}
RUN echo ${JAR_FILE}
COPY ${JAR_FILE} app.jar
RUN mkdir /root/db_migrations
COPY src/main/resources/db_migrations /root/db_migrations
RUN ls /root
EXPOSE 8080
ENTRYPOINT ["java","-jar","/app.jar"]